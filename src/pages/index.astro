---
import IndexLayout from '@/layouts/IndexLayout.astro'
import CircularAvatar from '@/components/ui/CircularAvatar.astro'
import Header from '@/components/layout/Header.astro'
import About from '@/components/widgets/About.astro'
import PostList from '@/components/widgets/PostList.astro'
import { themeConfig } from '@/config'
import { getSortedFilteredPostsByTag } from '@/utils/draft';

const caseStudyPosts = await getSortedFilteredPostsByTag('case-study');
const webPosts = await getSortedFilteredPostsByTag('web');
const artPosts = await getSortedFilteredPostsByTag('art');
const hiddenPosts = await getSortedFilteredPostsByTag('hidden');
// const nonTaggedPosts = await getSortedFilteredPostsByTag(true);

const combinedposts = await [...webPosts, ...webPosts];
---

<IndexLayout title={themeConfig.site.title} description={themeConfig.site.description}>
  <CircularAvatar />
  <div>
    <Header />
  </div>
  <About />
  <main class="main-fade-in">
    <PostList posts={caseStudyPosts} title={"Case Studies"} />
    <PostList posts={combinedposts} title={"Writing"} />
    <!-- <PostList posts={artPosts} title={"Writing about Art"} /> -->
    <!-- <PostList posts={hiddenPosts} title={"Hidden articles"} /> -->
    <!-- <PostList posts={nonTaggedPosts} title={"Unfiltered articles"} /> -->
  </main>
</IndexLayout>

<style>
  .main-fade-in {
    opacity: 1;
  }

  @media (min-width: 769px) {
    .main-fade-in {
      opacity: 0;
      animation: fadeIn 0.6s ease-out 1.8s forwards;
    }

    /* On navigation, skip animation (uses body class set by BaseLayout inline script) */
    body.is-navigation .main-fade-in {
      opacity: 1;
      animation: none;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .main-fade-in {
      opacity: 1;
      animation: none;
    }
  }
</style>
